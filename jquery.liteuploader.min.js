/* liteUploader v1.1 | https://github.com/burt202/lite-uploader | Aaron Burtnyk (http://www.burtdev.net) */
$.fn.liteUploader=function(e){function r(e,t,n,r,i){var s=[],o;if(t&&jQuery.inArray(e.type,t.split(","))===-1){o=r||"Incorrect file type (only "+t+" allowed)";s.push({type:"type",message:o})}if(n&&e.size>n){o=i||"File size too big (max "+n+" bytes)";s.push({type:"size",message:o})}return s}var t={multi:false,script:null,allowedFileTypes:null,maxSizeInBytes:null,typeMessage:null,sizeMessage:null,beforeFunc:function(){},afterFunc:function(e){},displayFunc:function(e,t){},cancelFunc:function(){}},n=$.extend(t,e);if(n.multi){this.attr("multiple","multiple")}this.change(function(){var e,t=new FormData,i,s=$(this),o=false,u=[];if(this.files.length===0){return}n.beforeFunc();for(e=0;e<this.files.length;e+=1){i=this.files[e];u=r(i,n.allowedFileTypes,n.maxSizeInBytes,n.typeMessage,n.sizeMessage);if(u.length>0){o=true}t.append(s.attr("name")+"[]",i);n.displayFunc(i,u)}if(!o){$.ajax({url:n.script,type:"POST",data:t,processData:false,contentType:false,success:function(e){s.replaceWith(s.val("").clone(true));n.afterFunc(e)}})}})}