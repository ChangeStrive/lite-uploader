$.fn.liteUploader=function(e){function r(e,t,n){var r=[];if(t&&jQuery.inArray(e.type,t.split(","))===-1){r.push({type:"type",message:"Incorrect file type (only "+t+" allowed)"})}if(n&&e.size>n){r.push({type:"size",message:"File size too big (max "+n+" bytes)"})}return r}var t={multi:false,script:null,allowedFileTypes:null,maxSizeInBytes:null,beforeFunc:function(){},afterFunc:function(e){},displayFunc:function(e,t){}},n=$.extend(t,e);if(n.multi){this.attr("multiple","multiple")}this.change(function(){var e,t=new FormData,i,s=$(this),o=false,u=[];n.beforeFunc();for(e=0;e<this.files.length;e+=1){i=this.files[e];u=r(i,n.allowedFileTypes,n.maxSizeInBytes);if(u.length>0){o=true}t.append(s.attr("name")+"[]",i);n.displayFunc(i,u)}if(!o){$.ajax({url:n.script,type:"POST",data:t,processData:false,contentType:false,success:function(e){s.replaceWith(s.val("").clone(true));n.afterFunc(e)}})}})}